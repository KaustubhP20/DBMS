SET SERVEROUTPUT ON;

DECLARE
RNO INT;
NOD INT;
NOB BORROWER.NAMEOFBOOK%TYPE;
AMOUNT INT;
DOI DATE;

BEGIN
RNO := &RNO;
NOB := &NOB;

SELECT ISSUEDATE INTO DOI FROM BORROWER WHERE ROLL_NO = RNO AND NAMEOFBOOK = NOB;
NOD := SYSDATE - DOI;

IF (NOD > 30) THEN
AMOUNT := 50 * NOD;
UPDATE BORROWER SET STATUS = 'R' WHERE ROLL_NO = RNO;
INSERT INTO FINE VALUES(RNO, SYSDATE, AMOUNT);
ELSIF (NOD < 30 AND NOD >= 15) THEN
AMOUNT := 5 * NOD;
UPDATE BORROWER SET STATUS = 'R' WHERE ROLL_NO = RNO;
INSERT INTO FINE VALUES(RNO, SYSDATE, AMOUNT);
ELSE
UPDATE BORROWER SET STATUS = 'R' WHERE ROLL_NO = RNO;
DBMS_OUTPUT.PUT_LINE('NO FINE');
END IF;

EXCEPTION
WHEN NO_DATA_FOUND THEN
DBMS_OUTPUT.PUT_LINE('NO DATA AVAILABLE');
END;


