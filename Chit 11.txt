CREATE OR REPLACE TRIGGER TRIGGER1 
BEFORE DELETE OR INSERT OR UPDATE ON LIB_TAB
REFERENCING OLD AS OLD NEW AS NEW
FOR EACH ROW
DECLARE
TRIGGER1 CHAR;
BEGIN
IF UPDATING THEN
DBMS_OUTPUT.PUT_LINE(:OLD.STATUS);
INSERT INTO LIB_AUDIT VALUES(SYSDATE, :NEW.BOOK_NAME, :OLD.STATUS, :NEW.STATUS, 'UPDATE');
ELSIF INSERTING THEN
DBMS_OUTPUT.PUT_LINE(:NEW.STATUS);
INSERT INTO LIB_AUDIT VALUES(SYSDATE, :NEW.BOOK_NAME, :OLD.STATUS, :NEW.STATUS, 'INSERT');
ELSE
DBMS_OUTPUT.PUT_LINE(:OLD.BOOK_NAME || 'DELETING');
INSERT INTO LIB_AUDIT VALUES(SYSDATE, :OLD.BOOK_NAME, :OLD.STATUS, :NEW.STATUS, 'DELETE');
END IF;
END;
